<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>領隊端</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f0f0f0; padding:20px; }
        h2 { text-align:center; }
        table { width:100%; border-collapse:collapse; margin-top:20px; }
        th, td { border:1px solid #ccc; padding:10px; text-align:left; }
        th { background:#007bff; color:white; }
        button { padding:10px 20px; background:#007bff; color:white; border:none; border-radius:5px; cursor:pointer; margin-top:10px; }
        button:hover { background:#0056b3; }
    </style>
</head>
<body>
    <h2>領隊系統</h2>
    <button id="logout-btn">登出</button>
    <div id="customer-table"></div>

    <script src="data.js"></script>
    <script>
        const currentUser = JSON.parse(sessionStorage.getItem("currentUser"));
        if(!currentUser || currentUser.role !== "leader") {
            alert("請先登入領隊帳號！");
            window.location.href = "index.html";
        }

        const tableDiv = document.getElementById("customer-table");
        let html = "<table><tr><th>旅客姓名</th><th>房號</th><th>緊急聯絡人</th></tr>";

        customerData.forEach(cust => {
            html += `<tr>
                        <td>${cust.name}</td>
                        <td>${cust.rooms.find(r => r.day===1).hotel} / ${cust.rooms.find(r => r.day===1).number}</td>
                        <td>${cust.emergency.name} / ${cust.emergency.phone}</td>
                     </tr>`;
        });
        html += "</table>";
        tableDiv.innerHTML = html;

        document.getElementById("logout-btn").addEventListener("click", () => {
            sessionStorage.removeItem("currentUser");
            window.location.href = "index.html";
        });
    </script>
</body>
</html>
